<!DOCTYPE html>
<html ng-app="hotChocolate">
  <head>
    <meta charset="utf-8">
    <title>Visual BI</title>
    <!-- Mobile viewport optimized -->
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<!-- Bootstrap CSS -->
		<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
		<!-- Custom CSS -->
		<link href="stylesheets/style.css" rel="stylesheet">

		<!-- Include Modernizr in the head, before any other Javascript -->
		<script src="js/modernizr-2.6.2.min.js"></script>
  </head>
  <body>
    <div class="container-fluid" id="main">
      <div class="row">
        <div class="col-xs-3" id= "left-menu">
          <div id="left-menu-wrapper" ng-controller="connectionController">
            <h4 id="cubeName">Select cube</h4>
            <div id="head-div">
              <!-- Button trigger modal -->
              <button type="button" class="btn btn-link" data-toggle="modal" data-target="#myModal">
                Choose cube
              </button>
              <!-- myModal -->
              <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span class="closeButton" aria-hidden="true">&times;</span></button>
                      <h4 class="modal-title" id="myModalLabel">Server details</h4>
                    </div>
                    <div class="modal-body">
                      <p>
                        <label for="url">Server URL</label>
                        <input type="text" name="url" id="url" ng-model="connection.serverUrl">
                        <button type="button" class="btn" id="editConnection" data-toggle="modal" data-dismiss="modal" data-target="#serverCredentials"><span class="glyphicon glyphicon-edit"></span></button>
                      </p>
                      <p>
                        <label for="dataSource">DataSource</label>
                        <select class="dataSourceNameList" name="dataSource" id="dataSource" ng-model="connection.dataSource" ng-change="getCatalog()">
                          <option ng-repeat="option in connection.dataSourceOptions" value="{{option}}">{{option}}</option>
                          <option value=""> ---select---</option>
                        </select>
                      </p>
                      <p>
                        <label for="catalog">Catalog</label>
                        <select class="catalogNameList" name="catalog" id="catalog" ng-model="connection.catalog" ng-change="getCube()">
                          <option ng-repeat="option in connection.catalogOptions" value="{{option.caption_name}}">{{option.caption_name}}</option>
                          <option value=""> ---select---</option>
                        </select>
                      </p>
                      <p>
                        <label for="cube">Cube</label>
                        <select class="cubeNameList" name="cube" id="cube" ng-model="connection.cube">
                          <option ng-repeat="option in connection.cubeOptions" value="{{option.caption_name}}">{{option.caption_name}}</option>
                          <option value=""> ---select---</option>
                        </select>
                      </p>
                    </div> <!-- modal-body end-->
                    <div class="modal-footer">
                      <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                      <button type="button" class="btn btn-primary" data-dismiss="modal" id="save" ng-click="getDimensions(); getMeasures()">Save</button>
                    </div> <!-- modal-footer end -->
                  </div> <!-- modal-content end -->
                </div> <!-- modal-dialog end -->
              </div> <!-- myModal end-->



              <!-- Modal Server Credentials -->
              <div class="modal fade" id="serverCredentials" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1">
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span class="closeButton" aria-hidden="true">&times;</span></button>
                      <h4 class="modal-title" id="myModalLabel1">Server Credentials</h4>
                    </div>
                    <div class="modal-body credentialDetails">
                      <p>
                        <label for="connectionName">Connection Name:</label>
                        <select class="connectionsNameList" name="connName" id="connName">
                          <option value="">select</option>
                        </select>
                        <input type="text" name="connName" id="newConnName" placeholder="Tag this Connection" style="display: none;">
                        <button type="button" class="btn-small btn-primary" id="addConn">Add Connection</button>

                      </p>
                      <p>
                        <label for="serverURL">Server URL:</label>
                        <input type="text" name="serverURL" id="serverURL" placeholder="Enter the server URL" readonly="true">
                      </p>
                      <p>
                        <label for="userId">User ID:</label>
                        <input type="text" name="userId" id="userId" placeholder="Enter the server User ID" readonly="true">
                      </p>
                      <p>
                        <label for="password">Password</label>
                        <input type="password" name="password" id="password" placeholder="Enter the server password" readonly="true">
                      </p>
                    </div> <!-- modal-body end-->
                    <div class="modal-footer">
                      <button type="button" class="btn btn-default">Reset</button>
                      <button type="button" class="btn btn-default" id="validate" style="display: none;">Apply</button>
                      <button type="button" class="btn btn-primary" data-toggle="modal" data-dismiss="modal" data-target="#myModal" id="saveCredentials">Save</button>
                    </div> <!-- modal-footer end -->
                  </div> <!-- modal-content end -->
                </div> <!-- modal-dialog end -->
              </div> <!-- myModal end-->




            </div> <!-- head-div end-->
            <h4>Dimensions</h4>
            <div id='dim-div'>
              <ul class='nav nav-list-main dimensions'>
                <li ng-repeat="dimension in dimensions" ng-if="dimension.caption_name !== 'Measures'">
                  <label class='nav-toggle nav-header' ng-click="!dimension.children.length > 0 && getHierarchies(dimension.unique_name)" toggle-list>
                    <span class='nav-toggle-icon glyphicon glyphicon-chevron-right'></span>
                    <a href='#'> {{dimension.caption_name}}</a>
                  </label>
                  <ul class='nav nav-list nav-left-ml' ng-show="dimension.children.length">
                    <li ng-repeat="hierarchy in dimension.children">
                      <label class='nav-toggle nav-header' ng-click="!hierarchy.children.length > 0 && getLevels(dimension.unique_name,hierarchy.unique_name)" toggle-list>
                        <span class='nav-toggle-icon glyphicon glyphicon-chevron-right'></span>
                        <a href='#' ng-model="dimension.children" data-drag="true" data-jqyoui-options="{revert: 'invalid', appendTo: 'body', helper: 'clone'}" jqyoui-draggable="{index: {{$index}}, animate: 'true', placeholder: 'keep'}"> {{hierarchy.caption_name}}</a>
                      </label>
                      <ul class='nav nav-list nav-left-ml' ng-show="hierarchy.children.length">
                        <li ng-repeat="level in hierarchy.children">
                          <label class='nav-toggle nav-header' ng-click="!level.children.length > 0 && getMembers(dimension.unique_name, hierarchy.unique_name, level.unique_name)" toggle-list>
                            <span class='nav-toggle-icon glyphicon glyphicon-chevron-right'></span>
                            <a href='#' ng-model="hierarchy.children" data-drag="true" data-jqyoui-options="{revert: 'invalid', appendTo: 'body', helper: 'clone'}" jqyoui-draggable="{index: {{$index}}, animate: 'true', placeholder: 'keep'}"> {{level.caption_name}}</a>
                          </label>
                          <ul class='nav nav-list nav-left-ml' ng-show="level.children.length">
                            <li ng-repeat="member in level.children">
                              <a href='#' ng-model="level.children" data-drag="true" data-jqyoui-options="{revert: 'invalid', appendTo: 'body', helper: 'clone'}" jqyoui-draggable="{index: {{$index}}, animate: 'true', placeholder: 'keep'}"> {{member.caption_name}}</a>
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </div>
            <h4>Measures</h4>
            <div id="measures-div">
              <ul class='nav nav-list-main measures'>
                <li ng-repeat="measure in measures">
                    <a href='#' ng-model="measures" data-drag="true" data-jqyoui-options="{revert: 'invalid', appendTo: 'body', helper: 'clone'}" jqyoui-draggable="{index: {{$index}}, animate: 'true', placeholder: 'keep'}"> {{measure.caption_name}}</a>
                </li>
              </ul>
            </div>
          </div> <!-- left-menu-wrapper end-->
        </div> <!-- left-menu end-->
        <div class="col-xs-8" id="content" ng-controller="queryController">
          <!-- saveQueryModal-->
          <div class="modal fade" id="saveQueryModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                  <h4 class="modal-title" id="myModalLabel">Save Query</h4>
                </div>
                <div class="modal-body">
                  <p>
                    <label for="queryName">Query name</label>
                    <input type="text" name="queryName" id="queryName" ng-model="newQueryName">
                  </p>
                  <div class="alert alert-warning alert-dismissible" role="alert" ng-show="showModalAlert">
                    <button type="button" class="close" ng-click="showModalAlert = false">
                      <span aria-hidden="true">&times;</span>
                    </button>
                    <strong>{{querySaveMessage}}</strong>
                  </div>
                </div> <!-- modal-body end-->
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                  <button type="button" class="btn btn-primary" id="saveQueryButton" save-query>Save</button>
                </div> <!-- modal-footer end -->
              </div> <!-- modal-content end -->
            </div> <!-- modal-dialog end -->
          </div> <!-- saveQueryModal end-->

          <div class="navbar navbar-fixed-top">
            <div class="btn-group" role="group">
              <!-- save query button-->
              <button type="button" class="btn btn-default navbar-btn" data-toggle="modal" data-target="#saveQueryModal">
                <span class="glyphicon glyphicon-floppy-disk"></span> Save
              </button>
              <button type="button" class="btn btn-default navbar-btn dropdown-toggle" data-toggle="dropdown">
                Queries <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" id="queryList">
                <li ng-repeat="query in queryList"><a href="#">{{query.queryName}}</a></li>
              </ul>
              <button type="button" class="btn btn-default navbar-btn" id="executeButton" grid-render><span class="glyphicon glyphicon-play-circle" ></span> Execute</button>
            </div>
            <div class="btn-group" role="group">
              <button type="button" class="btn btn-default navbar-btn"><span class="glyphicon glyphicon-floppy-disk"></span></button>
              <button type="button" class="btn btn-default navbar-btn"><span class="glyphicon glyphicon-print"></span></button>
              <button type="button" class="btn btn-default navbar-btn"><span class="glyphicon glyphicon-print"></span></button>
            </div>
            <div class="btn-group" role="group">
              <button type="button" class="btn btn-default navbar-btn"><span class="glyphicon glyphicon-floppy-disk"></span></button>
              <button type="button" class="btn btn-default navbar-btn"><span class="glyphicon glyphicon-print"></span></button>
              <button type="button" class="btn btn-default navbar-btn"><span class="glyphicon glyphicon-download-alt"></span></button>
            </div>
            <div class="btn-group" role="group">
              <button type="button" class="btn btn-default navbar-btn"><span class="glyphicon glyphicon-floppy-disk"></span></button>
              <button type="button" class="btn btn-default navbar-btn"><span class="glyphicon glyphicon-print"></span></button>
              <button type="button" class="btn btn-default navbar-btn"><span class="glyphicon glyphicon-download-alt"></span></button>
            </div>
          </div> <!-- navbar-end -->
          <div id="content-wrapper">
            <div class="row myRect" ng-repeat="item in items">
              <div class="col-xs-2">
                <h4>{{item.label}}</h4>
              </div>
              <div class="col-xs-10 columns">
                <ul class="nav" data-drop="true" ng-model="item.list" jqyoui-droppable="{multiple:true}">
                  <li ng-repeat="elem in item.list track by $index" ng-show="elem.caption_name">
                    {{elem.caption_name}}<button type='button' class='close' ng-click="deleteItem($index, $parent.$index)">&times;</button>
                  </li>
                  <li class="placeholder" ng-hide="hideMe(item.list)">Drag measures/dimensions here</li>
                </ul>
              </div> <!-- col-xs-10 end-->
            </div> <!-- myRect end-->
            <div class="row">
              <div class="col-xs-12">
                <div class="section_result">
                  <table id="dataTable">
                    <tbody id="dataTableBody">
                      <script id="axis0_insersion">
                      {{axis0}}
                      </script>
                      <script id="axis1_insersion">
                      {{axis1}}
                      </script>
                    </tbody>
                  </table>
                </div> <!-- section_result end-->
              </div> <!-- col-sm-12 end-->
            </div> <!-- row end-->
          </div> <!-- content-wrapper end-->
        </div> <!-- col-xs-8 end-->
        <div class="col-xs-1" id="right-menu">
          <div class="right-menu-wrapper">
            <div class="btn-group-vertical" role="group">
              <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-floppy-disk"></span></button>
              <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-print"></span></button>
              <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-download-alt"></span></button>
              <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-floppy-disk"></span></button>
              <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-print"></span></button>
              <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-download-alt"></span></button>
              <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-floppy-disk"></span></button>
              <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-print"></span></button>
              <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-download-alt"></span></button>
              <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-floppy-disk"></span></button>
              <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-print"></span></button>
              <button type="button" id="graph1" class="btn btn-default graph"><span class="glyphicon glyphicon-download-alt"></span></button>
            </div> <!-- btn-group end -->
          </div> <!-- menu-wrapper-end -->
        </div> <!-- right-menu end -->
      </div> <!-- row end-->
    </div> <!--container main end -->

    <!-- angular-->
    <script type="text/javascript" src="/lib/angular/angular.js"></script>

    <!-- jquery -->
    <script src="/lib/jquery/dist/jquery.min.js"></script>

    <!-- jquery-ui -->
    <script src="/lib/jquery-ui/jquery-ui.min.js"></script>

    <!-- Bootstrap JS -->
    <script src="bootstrap/js/bootstrap.min.js"></script>

    <!-- angular-dragdrop -->
    <script src="/lib/angular-dragdrop/src/angular-dragdrop.min.js"></script>

    <!-- app.js-->
    <script type="text/javascript" src="/app.js"></script>

    <!-- D3 JS -->
    <script src="js/d3.js"></script>

    <!-- Render BarChart -->
    <script src="js/renderBarChart2.js"></script>

    <!-- Custom JS -->
    <script src='js/myscript2.js'></script>

  </body>
</html>
